<a{% if _block.settings.collection != blank and _block.settings.collection.all_products_count > 0 %} href="{{ _block.settings.collection.url }}"{% endif %}
  class="card animate-arrow link{% if _block.settings.collection.image != blank %} card--media{% else %}{% if _section.settings.image_ratio != 'adapt' %} card--stretch{% endif %}{% endif %}{% unless _section.settings.image_padding %} card--light-border{% endunless %}"
>
  <div class="card--stretch card-colored color-{{ _section.settings.color_scheme }}">
    {%- if _block.settings.collection.image != blank -%}
      <div{% if _section.settings.image_padding %} class="card__media-spacer"{% endif %}>
        {% if _section.settings.image_padding %}<div class="overlay-card"></div>{% endif %}
        <div class="media{% if _section.blocks.size > 1 %} media--{{ _section.settings.image_ratio }}{% endif %} media--hover-effect overflow-hidden"
          {% if _section.settings.image_ratio == 'adapt' and _section.blocks.size > 1 %}style="padding-bottom: {{ 1 | divided_by: _block.settings.collection.image.aspect_ratio | times: 100 }}%;"{% endif %}>

          <img srcset="{%- if _block.settings.collection.image.width >= 165 -%}{{ _block.settings.collection.image | img_url: '165x' }} 165w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 330 -%}{{ _block.settings.collection.image | img_url: '330x' }} 330w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 535 -%}{{ _block.settings.collection.image | img_url: '535x' }} 535w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 720 -%}{{ _block.settings.collection.image | img_url: '720x' }} 720w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 940 -%}{{ _block.settings.collection.image | img_url: '940x' }} 940w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 1440 -%}{{ _block.settings.collection.image | img_url: '1440x' }} 1440w,{%- endif -%}
            {%- if _block.settings.collection.image.width >= 1880 -%}{{ _block.settings.collection.image | img_url: '1880x' }} 1880w{%- endif -%}"
            src="{{ _block.settings.collection.image | img_url: '533x' }}"
            sizes="(min-width: 1100px){% if _section.blocks.size > 1 %}535px{% else %}940px{% endif %}, (min-width: 750px) {% if _section.blocks.size > 1 %}calc((100vw - 10rem) / 2){% else %}calc(100vw - 10rem){% endif %}, calc(100vw - 3rem)"
            alt="{{ _block.settings.collection.title | escape }}"
            height="{{ _block.settings.collection.image.height }}"
            width="{{ _block.settings.collection.image.width }}"
            loading="lazy"
            class="motion-reduce"
          >
        </div>
      </div>

      {%- if show_content -%}
      <div class="card__text card__text-spacing card-colored card__text-hover{% if _section.settings.image_padding == false %} color-{{ _section.settings.color_scheme }}{% endif %}">
        {% unless _section.settings.image_padding %}<div class="overlay-card"></div>{% endunless %}
        <h3>
          {%- if _block.settings.collection.title != blank -%}
            {{- _block.settings.collection.title | escape -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
          {%- else -%}
            {{ 'onboarding.collection_title' | t }}
          {%- endif -%}
        </h3>
      </div>
      {%- endif -%}
    {%- else -%}
      <div class="overlay-card"></div>
      <div class="card__text-spacing card__text-hover">
        <h3 class="h1">
          {%- if _block.settings.collection.title != blank -%}
            {{- _block.settings.collection.title | escape -}}{%- if _block.settings.collection.description == blank -%}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>{% endif %}
          {%- else -%}
            {{ 'onboarding.collection_title' | t }}
          {%- endif -%}
        </h3>

        {%- if _block.settings.collection.description != blank -%}
          <p class="card__caption">
            {{- _block.settings.collection.description | strip_html | truncatewords: 12 -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
          </p>
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
</a>
